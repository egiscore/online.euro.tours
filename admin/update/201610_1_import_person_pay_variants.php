<?php
 class import_person_pay_variants extends UpdateModel { public $title = 'Pay Variants'; public function make() { $routes = array(); include _ROOT . 'routes.php'; $return = 0; $variants = array( 'invoice', 'psbank', 'platron', 'uniteller', 'kkb_kz', 'sberbank', 'alfabank', 'liqpay', 'privatbank', 'paylate', 'paybox', ); if (!defined('INTERNET_USER')) { $sql = $this->db->formatExec( $this->OFFICEDB . '.dbo.up_WEB_3_default_usercode' ); $user_code = $this->db->fetchOne($sql); } else { $user_code = INTERNET_USER; } foreach ($variants as $variant) { if (isset($routes[$variant]) && isset($routes[$variant]['uses']) && is_array($routes[$variant]['uses']) && in_array('cl_refer_person', $routes[$variant]['uses'])) { $sql = $this->db->formatExec( $this->OFFICEDB . '.dbo.up_WEB_3_ADMIN_tour_config', [ 'Section' => $variant, 'What' => 'can_pay_person', 'Value' => 1, 'UserCode' => $user_code, ] ); $this->db->query($sql); } } return $return; } } 