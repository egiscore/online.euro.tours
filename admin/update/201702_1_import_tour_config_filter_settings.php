<?php
 class import_tour_config_filter_settings extends UpdateModel { public $title = 'Импорт настроек фильтров'; public function make() { if (!defined('INTERNET_USER')) { $sql = $this->db->formatExec( $this->OFFICEDB . '.dbo.up_WEB_3_default_usercode' ); $INTERNET_USER = $this->db->fetchOne($sql); } else { $INTERNET_USER = INTERNET_USER; } $params['SEARCH_TOURTYPE_FILTER'] = (defined('SEARCH_TOURTYPE_FILTER')) ? SEARCH_TOURTYPE_FILTER : 0; $params['SEARCH_INCOMINGPARTNER_FILTER'] = (defined('SEARCH_INCOMINGPARTNER_FILTER')) ? SEARCH_INCOMINGPARTNER_FILTER : 0; $params['SEARCH_PROGRAMTYPE_FILTER'] = (defined('SEARCH_PROGRAMTYPE_FILTER')) ? SEARCH_PROGRAMTYPE_FILTER : 0; foreach ($params as $param => $value) { $sql = $this->db->formatExec( $this->OFFICEDB . '.dbo.up_WEB_3_ADMIN_tour_config', [ 'Section' => 'online_config', 'What' => $param, 'Value' => $value, 'UserCode' => $INTERNET_USER, ] ); $this->db->query($sql); } return 0; } } 