<?php
class ErrorCode { const CLAIM_NOT_ACTIVE = 1000038; const CLAIM_ALREADY_PAID = 1000039; const CLAIM_NOT_CONFIRMED = 1000040; const CLAIM_ALREADY_CONFIRMED = 1000041; const CLAIM_NOT_FINISHED = 1000042; const VISA_NOT_RECEIVED = 1000043; const DOCUMENTS_NOT_READY = 1000044; const PRINT_LATER = 1000045; const NOT_PREPARED_PRINT_EDOC = 1000046; const EXPIRED_PRINT_EDOC = 1000047; const ACCESS_REQUIRED = 1000048; const CLAIM_NOT_PAID = 1000049; const UNSUPPORTED_FILETYPE = 415; const DISABLED_PRINT_EDOC = 1000050; const VISA_NOT_EXTERNAL_DOCUMENT = 1000051; const OFFLINE_PRINT_EDOC = 1000052; public static function toString($value) { $registry = Samo_Registry::instance(); if (array_key_exists('messages', $registry)) { $messages = $registry['messages']; } else { $messages = []; } if (is_int($value)) { $class = new ReflectionClass(__CLASS__); $constants = array_flip($class->getConstants()); $name = $constants[$value]; } else { $name = $value; } return array_key_exists($name, $messages) ? $messages[$name] : $name; } public static function toException($value) { $code = is_int($value) ? $value : 0; throw new Samo_Exception(self::toString($value), $code); } public static function __callStatic($name, $arguments) { $class = new ReflectionClass(__CLASS__); $constants = $class->getConstants(); if (isset($constants[$name])) { if (!count($arguments)) { self::toException($constants[$name]); } else { throw new Samo_Exception($arguments[0], $constants[$name]); } } else { self::toException($name); } } } 