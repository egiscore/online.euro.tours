<?php
 class Samo_XmlWriter extends XMLWriter { public function __construct($root, $array, $charset = null) { $this->openMemory(); $this->setIndent(true); $this->setIndentString(' '); $this->startDocument('1.0', $charset); $this->startElement($root); $this->fromArray($array); $this->endElement(); $this->endDocument(); } public function __toString() { return $this->outputMemory(); } public function setElement($node, $content) { $this->startElement($node); $this->text($content); $this->endElement(); } public function fromArray($array) { if (is_array($array)) { foreach ($array as $index => $element) { if (is_array($element)) { if (is_numeric($index)) { $index = 'item'; } $this->startElement($index); $this->fromArray($element); $this->endElement(); } else { $this->setElement($index, $element); } } } } } 