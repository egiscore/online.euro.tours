<?php
function smarty_modifier_format_text($text, $skip_links = false ,$format = 'html') { if (!$skip_links) { $re = '/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i'; $text = preg_replace($re,'<a href="$1" target="_blank" class="external">$1</a>',$text); $re = '/(^|[^\/])(www\.[\S]+(\b|$))/im'; $text = preg_replace($re,'<a href="http://$2" target="_blank" class="external">$2</a>',$text); $re = '/(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/im'; $text = preg_replace($re,'<a href="mailto:$1" target="_blank" class="mailto">$1</a>',$text); } if ('html' == $format) { $text = nl2br($text); } return $text; } ?>
