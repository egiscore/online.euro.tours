<?php
 class Bonus_Manager_Controller extends Samo_Controller { public function default_action() { $this->view->assign('PERSONAL_AREA', Profile_Model::links()); $this->view->assign('RESULT', $this->model->bonus_info()); return parent::default_action(); } public function USE_BONUS() { try { if ($this->model->use_bonus()) { $this->view->assign('BONUS', $this->model->bonus_claim($this->model->defaults['CLAIM'])) ->element_remove('#bonus_manager_container') ->message($this->messages['BONUS_MANAGER_PAY_SUCCESS']); } else { $this->view->error($this->messages['BONUS_MANAGER_PAY_FAILED']); } } catch (Samo_Exception $e) { $this->view->popup_message($e->getMessage(), $this->messages['POPUP_TITLE'], 350, 60); } } } 