<?php
 class Freight_Time_Controller extends Samo_Controller { public function construct() { $this->actions = array( 'INIT' => array('TOWNFROMINC', 'STATEINC', 'TOWNTOINC'), 'TOWNFROMINC' => array('STATEINC', 'TOWNTOINC'), 'STATEINC' => array('TOWNTOINC'), ); $this->options_only = array('STATEINC', 'TOWNFROMINC', 'TOWNTOINC'); $this->persistent = array('STATEINC', 'TOWNFROMINC'); } public function default_action() { $this->init_data(); parent::default_action(); } public function FREIGHTTIME() { $this->view->assign('show_town', !intval($this->model->defaults['TOWNTOINC'])); if (false !== ($result = $this->model->getFreightTime())) { $this->view->assign('freight_time', $result) ->element_update('resultset', 'resultset.tpl'); } } public function samo_action($action) { if (!isset($this->actions[$action])) { Samo_Registry::get('response')->not_found(); } foreach ($this->actions[$action] as $control) { if (false !== ($result = $this->model->loadData($control))) { $this->view->add_options($control, $result); } } return true; } } 