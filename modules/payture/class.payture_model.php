<?php
class Payture_Model extends Samo_Acquiring { protected static function getPayture() { return Samo_Loader::load_object('Payture', static::acquiringConfig('PAYTURE_HOST'), static::acquiringConfig('PAYTURE_KEY'), static::acquiringConfig('PAYTURE_PASSWORD')); } public static function sendCheck($inumber, $data) { $email = $phone = ''; foreach ($data as $d) { if (!$email && $d['payee_email'] && Samo_Validate::email($d['payee_email'])) { $email = $d['payee_email']; } if (!$phone && $d['payee_phones']) { $phone = $d['payee_phones']; } } static::getPayture()->sendCheck($data, $inumber, static::acquiringConfig('PAYTURE_INN'), static::acquiringConfig('PAYTURE_TAX'), static::acquiringConfig('PAYTURE_TAXATION_SYSTEM'), static::acquiringConfig('PAYTURE_PAYMENT_TYPE'), '', $email ? $email : $phone); return true; } } 