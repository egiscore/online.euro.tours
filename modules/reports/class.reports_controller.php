<?php
 class Reports_Controller extends Samo_Controller { public function default_action() { $this->view->assign('PERSONAL_AREA', Profile_Model::links()); $this->view ->assign('reportList', $this->model->getReportList()); if (Samo_Request::get('template')) { $this->_getReportParams(); } parent::default_action(); } public function _getReportParams($template = null, $values = null) { $this->view ->assign('load', 'reportParams') ->assign('fields', $this->model->getReportParams($template, $values)); } public function getReportParams() { $this->_getReportParams(); $this->view ->element_update('.reportParams', 'reports.tpl') ->js_call('samo.initReportForm'); } public function reloadReportParams() { $frm = Samo_Request::post('frm'); $template = key($frm['report']); $values = $frm['report'][$template]; $this->_getReportParams($template, $values); $this->view ->element_update('.reportParams', 'reports.tpl') ->js_call('samo.initReportForm'); } } 