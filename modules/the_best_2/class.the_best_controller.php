<?php
 class The_Best_Controller extends Search_Tour_Controller { public function construct() { $this->view->module('the_best', 2); $this->actions = array( 'INIT' => array('TOWNFROMINC', 'STATEINC', 'TOWNTOINC', 'GROUPSTARINC', 'CURRENCY'), 'TOWNFROMINC' => array('STATEINC', 'TOWNTOINC', 'GROUPSTARINC', 'CURRENCY'), 'STATEINC' => array('TOWNTOINC', 'GROUPSTARINC', 'CURRENCY'), ); $this->options_only = array('STATEINC', 'TOWNFROMINC', 'TOWNTOINC', 'GROUPSTARINC', 'CURRENCY'); $this->persistent = array('STATEINC', 'TOWNFROMINC', 'CURRENCY'); } public function default_action() { $this->init_data(); $this->view ->js_var('samo.CROSS_RATES', $this->model->getCurrencyRates()) ->js_var('samo.roundConfig', $this->model->roundConfig()); $this->__prices(); $this->default_app_env(); $this->view->render('layout'); } public function PRICES() { $this->__prices(); $this->view->element_update('resultset', 'resultset.tpl'); } protected function __prices() { $result = $this->model->getResult(); $this->view->assign('SEARCH_BY_HOTEL_NIGHTS', $this->model->getConfig('SEARCH_BY_HOTEL_NIGHTS', 'online_config', 0)) ->assign('prices', $result)->assign('townFrom', $this->model->townFrom())->assign('state', $this->model->state()); } } 