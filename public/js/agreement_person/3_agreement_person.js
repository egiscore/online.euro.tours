
(function($){samo.agreement_person=function(param){var _ROOT_URL=samo.ROUTES.agreement_person.url,$form=$('#agr_pers').closest('form'),$link=$('#agr_pers');samo.helpalt_field($('#select_fields'));if(typeof param==="undefined"){$link.bind('click',function(event){event.preventDefault();if(check_fields()){if(typeof $link.data('post-form')=='undefined')
$link.data('post-form','#form_select_fields');samo.delayed_download(event);};});}else{$oldlink=$('.samo-delayed-download.in-progress').filter(function(){return $(this).data('guid')==param});if($oldlink.data('progress')){clearInterval($oldlink.data('progress'));$oldlink.removeData('progress');$oldlink.parent().find('.progressbar').remove();$oldlink.removeClass('in-progress').unbind();}}}
function check_fields(){var is_ok=true;samo.field.clear_errors($('#select_fields'));$('.required','#select_fields').not('label').each(function(){if(!$(this).val().length){is_ok=samo.field.error(samo.i18n('REQUIRED_FIELD_EMPTY'),this);return false;}});if(is_ok){$('.date','#select_fields').each(function(){if(this.value.length&&!$.valid_date(this)){is_ok=samo.field.error(samo.i18n('DATE_FORMAT_TITLE'),this);return false;}});}
return is_ok;}})(samo.jQuery);