
(function($){var container=samo.initModuleContainer('freight_changes');samo.freight_changes=function(){var _ROOT_URL=samo.ROUTES.freight_changes.url,$module_container=container;var _controls=$('select,input',$module_container);samo.cache_controls($module_container);$module_container.find('.CHECKIN').datePicker();$('.TOWNFROMINC,.STATEINC,.TOURINC',$module_container).each(function(){$(this).find('option').each(function(){if($(this).attr('data-search-string')){$(this).attr('data-search-string',$(this).attr('data-search-string')+' '+$(this).attr('data-search-string').fixKeyboardLayout());}})}).chosen({});$('.TOWNFROMINC',$module_container).bind('change',function(){$.getScript(getParams('TOWNFROMINC'),function(){$('.TOURINC',$module_container).trigger('chosen:updated');});});$('.STATEINC',$module_container).bind('change',function(){$.getScript(getParams('STATEINC'));});$('.load',$module_container).bind('click',function(){var is_ok=true;$.each(['TOWNFROMINC','STATEINC'],function(){var $el=$module_container.find('.'+this);if(0==Number($el.val())){$.notify({text:samo.i18n('NOT_SET_'+this),type:'error',disappearTime:3000});$el.get(0).focus();is_ok=false;}});if(is_ok){$.getScript(getParams('frchanges'),initResultset);}});function getParams(action){var result={};result.samo_action=action;_controls.each(function(){var name=this.name||$(this).attr('name');var value=$.controlValue(this,false);if(name&&value&&value!==0)
result[name]=value;});return _ROOT_URL+$.param(result);}
function initResultset(){$('.resultset',$module_container).find('table.res tr:even td').addClass('silver');}
initResultset();};$(document).ready(samo.freight_changes);})(samo.jQuery);