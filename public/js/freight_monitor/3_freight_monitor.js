'use strict';(function($){var container=samo.initModuleContainer('freight_monitor');samo.freight_monitor=function(){var _ROOT_URL=samo.ROUTES.freight_monitor.url,$module_container=container,_controls=$module_container.find('select,input'),DOLOAD=(parseInt($.getParameter('DOLOAD',true,$module_container))==1);samo.cache_controls($module_container);$module_container.find('.CHECKIN,.CHECKOUT').datePicker().end().find('.PLUS_MINUS').SpinButton().end().find('.SOURCE,.TARGET').bind('change',function(){var name=this.name||$(this).attr('name');if($.controlValue(name,false,$module_container)){$.getScript(getParams(name),function(){},true);}}).end().find('.load').bind('click',getFreights).end().find('.SOURCE,.TARGET,.AIRLINE').chosen({no_results_text:samo.i18n('NOT_SET_TOWNFROMINC'),enable_split_word_search:false,search_contains:true});$(samo.controls.CHECKIN).datePicker({pair:$(samo.controls.CHECKOUT)}).bind('change.datepicker',function(){var period=parseInt(samo.PERIOD)||0;var dateend=new Date(samo.dateFromString(this.value));dateend.setDate(dateend.getDate()+period);$(samo.controls.CHECKOUT).datePicker({value:samo.dateAsString(dateend)});});function getParams(action){var useGET=arguments[1]||false;var result={};result.samo_action=action;_controls.each(function(){var name=this.name||$(this).attr('name');var value=$.controlValue(this,useGET);if(name&&value&&value!==0){result[name]=value;}});return _ROOT_URL+$.param(result);}
function getFreights(){var is_ok=true;if(0==parseInt(samo.controls.SOURCE.value||0)){is_ok=false;$(samo.controls.SOURCE.nextSibling).errorField(samo.i18n('NOT_SET_TOWNFROMINC'));}
if(0==parseInt(samo.controls.TARGET.value||0)){is_ok=false;$(samo.controls.TARGET.nextSibling).errorField(samo.i18n('NOT_SET_TOWNTO'));}
if(is_ok){$.getScript(getParams('FREIGHTS'));}}};$('document').ready(samo.freight_monitor);})(samo.jQuery);