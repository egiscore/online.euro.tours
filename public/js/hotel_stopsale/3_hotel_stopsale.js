"use strict";(function($){var container=samo.initModuleContainer('hotel_stopsale');samo.hotel_stopsale=function(){var _ROOT_URL=samo.ROUTES.hotel_stopsale.url,$module_container=container;var _controls=samo.cache_controls($module_container,'.STATEINC,.TOWNTO,.TOWNFROMINC,.HOTELINC');_controls.resultset=$module_container.find('.resultset');$module_container.find('select').bind('change',function(){clearErrors();$(_controls.resultset).empty();});$module_container.find('.TOWNFROMINC,.STATEINC,.TOWNTO,.HOTELINC').chosen({});$(_controls.TOWNFROMINC).bind('change',function(){$(_controls.STATEINC).find('option').remove();$(_controls.TOWNTO).find('option').remove();if(this.value!=0){$.getScript(getParams('TOWNFROMINC'),true);}});$(_controls.STATEINC).bind('change',function(){if(this.value!=0){$.getScript(getParams('STATEINC'),true);}});$module_container.find('.load').bind('click',function(){if(validateStateField()&&validateHotelField()){$.getScript(getParams('STOPSALES'),true);}});function validateStateField(){if(!$.controlValue('STATEINC',false,$module_container)){$(_controls.STATEINC).errorField(samo.i18n('NOT_SET_STATEINC'));return false;}
return true;}
function validateHotelField(){if(!$.controlValue('HOTELINC',false,$module_container)){$(_controls.HOTELINC).errorField(samo.i18n('NOT_SET_HOTELINC'));return false;}
return true;}
function getParams(action){clearErrors();var useGET=arguments[1]||false;var result={};result.samo_action=action;$.each(_controls,function(i,v){var name=v.name||$(v).attr('name');if(name){var value=$.controlValue(v,useGET);if(name&&value&&value!==0){result[name]=value;}}});return _ROOT_URL+$.param(samo.getParams(result,$module_container));}
function clearErrors(){$module_container.find('.formError').remove();}};$(document).ready(samo.hotel_stopsale);samo.initHotelPopup(container,{object:'span.enabled'});})(samo.jQuery);